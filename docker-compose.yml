version: '3.8'

services:
  web:
    # 直接使用官方 Node.js 镜像，不再使用本地 Dockerfile 构建
    image: node:18-alpine
    container_name: smart-hospital-dev
    working_dir: /app
    
    # 挂载当前目录到容器内，实现代码同步和热更新
    volumes:
      - .:/app
      - /app/node_modules # 防止容器内的 node_modules 被本地覆盖（或反之）
    
    # 映射端口 (vite.config.ts 中配置的是 3000)
    ports:
      - "0.0.0.0:3000:3000"
    
    # 容器启动时执行的命令：安装依赖 -> 启动开发服务器
    # 注意：第一次启动可能需要一点时间来下载 npm 包
    command: sh -c "npm install && npm run dev"
    
    environment:
      - CHOKIDAR_USEPOLLING=true # 在某些系统(如Windows Docker Desktop)下确保热更新生效
